import{e as k,g as Y}from"./chunk-5KHUC4AD.js";import{a as A}from"./chunk-RRUVTCDZ.js";import"./chunk-26BXWEDZ.js";import{$ as K,$a as G,$b as F,Aa as r,Ea as g,Ja as S,Kb as T,Lb as E,Ma as x,Mb as B,Sb as N,Ta as c,Va as a,Wa as o,Xa as v,Ya as W,Z as $,Za as V,_ as z,_a as q,_b as L,ab as b,ac as j,hb as H,ib as s,jb as u,kb as p,mb as X,nb as D,pb as h,qb as y,rb as J,sb as Q,vb as P,wa as O}from"./chunk-UHR57JUW.js";var se=(i,t)=>({"bg-[#39332B]/60":i,"bg-[#D0C2AD]/30":t}),le=(i,t)=>({"hover:bg-[#39332B]/60 hover:border-[#39332B]/10":i,"hover:bg-[#D0C2AD]/30 hover:border-[#D0C2AD]/10":t});function ce(i,t){if(i&1&&(a(0,"div",12)(1,"h2",13),s(2),o(),a(3,"h3",14),s(4),o(),a(5,"p")(6,"span",15),s(7),o(),s(8,"\xA0 "),a(9,"span",16),s(10),o(),s(11,"\xA0 AED"),o(),a(12,"a",17),s(13),h(14,"translate"),o()()),i&2){let e=t.$implicit,n=t.index,d=b();c("ngClass",D(9,se,n%2!==0,n%2===0)),r(2),u(e.label),r(2),u(e.title),r(3),u(e.offerPrice),r(3),p(" ",e.price," "),r(2),c("ngClass",D(12,le,n%2===0,n%2!==0)),r(),p(" ",y(14,7,d.bookNowTextKey),"")}}function pe(i,t){if(i&1){let e=q();a(0,"button",18),G("click",function(){$(e);let d=b();return z(d.navigate())}),a(1,"span",19),s(2),h(3,"translate"),o(),K(),a(4,"svg",20),v(5,"path",21),o()()}i&2&&(r(2),p(" ",y(3,1,"SPECIALS.EXPLORE_BUTTON")," "))}var R=class i{constructor(t,e,n,d,m){this.backendService=t;this.route=e;this.router=n;this.translate=d;this.cdr=m}services=[];categoryName="";description="";image="images/her.png";langCode="en";bookNowTextKey="BANNER.BOOK_NOW_BUTTON";routeSubscription;langChangeSubscription;categoryId=null;originalCategoryData;originalSpecialOfferData;ngOnInit(){this.langCode=this.translate.currentLang||this.translate.defaultLang||"en",this.langChangeSubscription=this.translate.onLangChange.subscribe(t=>{this.langCode=t.lang,this.updateDisplayData(),this.cdr.detectChanges()}),this.routeSubscription=this.route.queryParamMap.subscribe(t=>{this.categoryId=t.get("id"),this.image=t.get("image")||"images/her.png",this.categoryId?(this.fetchCategoryDetails(this.categoryId),this.fetchSpecialOffers(this.categoryId)):this.clearData()})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}fetchCategoryDetails(t){this.backendService.getServicesWithCategory(t).subscribe({next:e=>{this.originalCategoryData=e.category,this.updateCategoryDisplay()},error:e=>console.error("Error fetching category details:",e)})}selectedId=null;fetchSpecialOffers(t){this.selectedId=t,this.backendService.getSpecialOfferByCategory(t).subscribe({next:e=>{e.success&&e.data&&e.data.length>0?(this.originalSpecialOfferData=e.data[0],this.updateServicesDisplay()):(this.originalSpecialOfferData=void 0,this.services=[]),this.cdr.detectChanges()},error:e=>{console.error("Error fetching special offers:",e),this.originalSpecialOfferData=void 0,this.services=[]}})}updateDisplayData(){this.updateCategoryDisplay(),this.updateServicesDisplay()}updateCategoryDisplay(){this.originalCategoryData?(this.categoryName=this.originalCategoryData.name?.[this.langCode]||"",this.description=this.originalCategoryData.description?.[this.langCode]||""):(this.categoryName="",this.description="")}updateServicesDisplay(){this.originalSpecialOfferData?this.services=this.originalSpecialOfferData.services.map(t=>{let e=t.label?.en||"",n=t.label?.ru||"",d=this.langCode==="ru"?n||e||"":[e,n].filter(Boolean).join(" / "),m=t.name?.en||"",_=t.name?.ru||"",w=this.langCode==="ru"?_||m||"Untitled":[m,_].filter(Boolean).join(" / ")||"Untitled",I=t.prices?.[0];return{label:d,title:w,price:I?.previousPrice,offerPrice:I?.currentPrice}}):this.services=[]}getLocalizedOfferText(t){if(!t)return"";let e=this.selectedId==="682836c6b4ddaecfd94baa7c"||this.selectedId==="68283839b4ddaecfd94baa8e"?t.en:"SPECIAL OFFERS",n=this.selectedId==="682836c6b4ddaecfd94baa7c"||this.selectedId==="68283839b4ddaecfd94baa8e"?t.ru:"\u0421\u041F\u0415\u0426\u0418\u0410\u041B\u042C\u041D\u042B\u0415 \u041F\u0420\u0415\u0414\u041B\u041E\u0416\u0415\u041D\u0418\u042F";return this.langCode==="en"?[e,n].filter(Boolean).join(" / "):n||e||""}clearData(){this.originalCategoryData=void 0,this.originalSpecialOfferData=void 0,this.updateDisplayData(),this.cdr.detectChanges()}navigate(){this.router.navigate(["special-offers"])}static \u0275fac=function(e){return new(e||i)(g(A),g(k),g(Y),g(L),g(P))};static \u0275cmp=S({type:i,selectors:[["app-banner"]],decls:15,vars:6,consts:[[1,"w-screen","h-screen","relative","text-primary","max-w-[2000px]","flex","flex-col","gap-5","sm:gap-10","lg:gap-5","text-center","justify-center","min-h-[850px]","md:min-h-[800px]","sm:justify-center","lg:justify-end","bg-black"],["alt","",1,"absolute","object-cover","object-center","h-full","min-w-full",3,"src"],[1,"absolute","inset-0","bg-black/75"],[1,"relative","px-[2rem]","mt-18","sm:px-[5rem]","xl:px-[8rem]","3xl:px-[15rem]","mx-auto","mb-3","lg:mb-5","pt-[2rem]","sm:pt-[3.5rem]","lg:pt-[96px]"],[1,"text-3xl","md:text-4xl","lg:text-5xl","max-w-3xl","mb-3","lg:mb-5","uppercase"],[1,"leading-5","text-primary/80","lg:leading-6.5","text-md","md:text-lg","lg:text-xl","max-w-3xl"],[1,"relative","px-[2rem]","sm:px-[5rem]","xl:px-[8rem]","3xl:px-[15rem]","w-full","pb-[2rem]","sm:pb-[3.5rem]","lg:pb-[96px]"],[1,"text-center","text-xl","max-w-3xl","mx-auto","lg:text-2xl"],[1,"flex","py-5","w-full","overflow-auto"],[1,"mx-auto","flex","gap-4"],["class","min-w-60 max-w-66 w-auto h-auto py-5 px-5 rounded-2xl flex items-center justify-center flex-col gap-1",3,"ngClass",4,"ngFor","ngForOf"],["class","button w-auto max-w-max mx-auto h-auto py-2 px-6 rounded-full transition-all flex items-center justify-center gap-2 bg-primary/20 border border-primary hover:border-white hover:bg-black/20",3,"click",4,"ngIf"],[1,"min-w-60","max-w-66","w-auto","h-auto","py-5","px-5","rounded-2xl","flex","items-center","justify-center","flex-col","gap-1",3,"ngClass"],[1,"text-lg","leading-5.5","max-h-17","overflow-auto","uppercase","mb-1"],[1,"text-lg","leading-5.5","max-h-22","overflow-auto"],[1,"text-xl"],[1,"line-through"],["href","https://wa.me/971588759719?text=Welcome%20to%20Shakirovna%20Beauty%20Salone",1,"px-4","py-1","transition","active:scale-95","border-2","border-primary","rounded-full",3,"ngClass"],[1,"button","w-auto","max-w-max","mx-auto","h-auto","py-2","px-6","rounded-full","transition-all","flex","items-center","justify-center","gap-2","bg-primary/20","border","border-primary","hover:border-white","hover:bg-black/20",3,"click"],[1,"text-primary","text-xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentcolor",1,"h-5","w-5","transform","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"]],template:function(e,n){e&1&&(a(0,"section",0),v(1,"img",1)(2,"div",2),a(3,"div",3)(4,"h1",4),s(5),o(),a(6,"p",5),s(7),o()(),a(8,"div",6)(9,"div",7),s(10),o(),a(11,"div",8)(12,"div",9),x(13,ce,15,15,"div",10),o()(),x(14,pe,6,3,"button",11),o()()),e&2&&(r(),c("src",n.image,O),r(4),u(n.categoryName),r(2),u(n.description),r(3),u(n.getLocalizedOfferText(n.originalSpecialOfferData==null?null:n.originalSpecialOfferData.offer)),r(3),c("ngForOf",n.services),r(),c("ngIf",n.services.length>0))},dependencies:[N,T,E,B,j,F],encapsulation:2})};var me=i=>({"bg-[#39332B]/70":i}),de=(i,t)=>({"bg-white/10":i,"bg-[#4D443A]":t});function ge(i,t){i&1&&(a(0,"span"),s(1),h(2,"translate"),o()),i&2&&(r(),p(" ",J(2,1,"POD_OFFER",void 0,"en")," / -20% \u041D\u0410 \u0412\u0421\u0415 \u0423\u0421\u041B\u0423\u0413\u0418 "))}function ue(i,t){i&1&&(a(0,"span"),s(1),h(2,"translate"),o()),i&2&&(r(),p(" ",y(2,1,"POD_OFFER")," "))}function fe(i,t){if(i&1&&(W(0),a(1,"div",18)(2,"span",19),s(3),o(),a(4,"span",20),s(5),o()(),V()),i&2){let e=b().$implicit;r(3),p(" ",e.discountedPrices==null?null:e.discountedPrices.join(" / ")," "),r(2),p(" ",e.originalPrices.join(" / ")," ")}}function xe(i,t){if(i&1&&(a(0,"span",21),s(1),o()),i&2){let e=b().$implicit;r(),u(e.originalPrices.join(" / "))}}function ve(i,t){if(i&1&&(a(0,"div",12)(1,"div",13)(2,"div",14),s(3),o(),a(4,"div",15),x(5,fe,6,2,"ng-container",16)(6,xe,2,1,"ng-template",null,0,Q),a(8,"a",17),s(9),h(10,"translate"),o()()()()),i&2){let e=t.$implicit,n=t.index,d=H(7),m=b(2);c("ngClass",X(8,me,n%2===0)),r(3),p(" ",e.serviceTitle," "),r(2),c("ngIf",m.isPododlogy)("ngIfElse",d),r(3),c("ngClass",D(10,de,n%2===0,n%2!==0)),r(),p(" ",y(10,6,m.bookNowTextKey)," ")}}function he(i,t){if(i&1&&(a(0,"div",8)(1,"h2",9),s(2),v(3,"div",10),o(),x(4,ve,11,13,"div",11),o()),i&2){let e=t.$implicit;r(2),p(" ",e.title," "),r(2),c("ngForOf",e.services)}}var M=class i{constructor(t,e,n,d){this.backendService=t;this.route=e;this.translate=n;this.cdr=d}serviceList=[];image="images/her.png";langCode="en";bookNowTextKey="BANNER.BOOK_NOW_BUTTON";routeSubscription;langChangeSubscription;originalApiData=null;isPododlogy=!1;ngOnInit(){this.langCode=this.translate.currentLang||this.translate.defaultLang||"en",this.langChangeSubscription=this.translate.onLangChange.subscribe(t=>{this.langCode=t.lang,this.originalApiData&&(this.serviceList=this.transformData(this.originalApiData)),this.cdr.detectChanges()}),this.routeSubscription=this.route.queryParamMap.subscribe(t=>{let e=t.get("id");this.image=t.get("image")||"images/her.png",e?(e==="68283839b4ddaecfd94baa8e"?this.isPododlogy=!0:this.isPododlogy=!1,this.fetchServiceData(e)):(this.originalApiData=null,this.serviceList=[],this.cdr.detectChanges())})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}fetchServiceData(t){this.backendService.getServicesWithCategory(t).subscribe({next:e=>{this.originalApiData=e,this.serviceList=this.transformData(this.originalApiData),this.cdr.detectChanges()},error:e=>{console.error("Error fetching service data for price list:",e),this.originalApiData=null,this.serviceList=[]}})}transformData(t){return!t||!t.subcategories?[]:t.subcategories.map(e=>{let n=this.langCode==="ru"?e.name.ru||e.name.en||"Unnamed Subcategory":`${e.name.en||"Unnamed"} / ${e.name.ru||""}`,d=(e.services||[]).map(m=>{let _=this.langCode==="ru"?m.name.ru||m.name.en||"Unnamed Service":`${m.name.en||"Unnamed"} / ${m.name.ru||""}`,w=(m.prices||[]).map(l=>l.amount).filter(l=>typeof l=="number"||typeof l=="string"),I=this.isPododlogy?w.map(l=>{if(typeof l=="number")return+(l*.8).toFixed(2);if(typeof l=="string"){if(l.includes("-")){let[C,f]=l.split("-").map(ie=>parseFloat(ie));if(!isNaN(C)&&!isNaN(f))return`${(C*.8).toFixed(0)}-${(f*.8).toFixed(0)}`}if(l.includes("/")){let C=l.split("/").map(f=>parseFloat(f.trim()));if(C.every(f=>!isNaN(f)))return C.map(f=>(f*.8).toFixed(0)).join(" / ")}let U=parseFloat(l);return isNaN(U)?l:+(U*.8).toFixed(2)}return l}):void 0;return{serviceTitle:_,originalPrices:w,discountedPrices:I}});return{title:n,services:d}}).filter(e=>e.services.length>0)}static \u0275fac=function(e){return new(e||i)(g(A),g(k),g(L),g(P))};static \u0275cmp=S({type:i,selectors:[["app-price-list"]],decls:10,vars:7,consts:[["regularPrice",""],[1,"w-full","text-primary","relative","bg-black","h-auto","max-w-[2000px]","overflow-auto","flex","flex-col","bg-cover","bg-center"],["alt","",1,"absolute","w-full","h-full","object-cover","object-center",3,"src"],[1,"absolute","bg-black/90","inset-0","backdrop-blur-sm"],[1,"text-primary","text-xl","lg:text-3xl","px-[2rem]","relative","py-[2rem]","lg:py-[48px]","w-full","text-center"],[4,"ngIf"],["class","flex flex-col relative pb-[2rem] sm:pb-[3.5rem] lg:pb-[96px] overflow-hidden",4,"ngFor","ngForOf"],[1,"text-primary","text-lg","lg:text-2xl","text-center","px-[2rem]","relative","pb-[2rem]","lg:pb-[48px]","mx-auto"],[1,"flex","flex-col","relative","pb-[2rem]","sm:pb-[3.5rem]","lg:pb-[96px]","overflow-hidden"],[1,"px-[2rem]","uppercase","sm:px-[5rem]","mb-5","xl:px-[8rem]","3xl:px-[15rem]","max-w-max","flex","flex-col","text-2xl","sm:text-3xl","lg:text-4xl","tracking-wide"],[1,"w-1/2","h-0.5","bg-primary","mt-2","self-end"],["class","w-full transition-all hover:scale-[1.01] px-[2rem] sm:px-[5rem] xl:px-[8rem] 3xl:px-[15rem] py-5",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-full","transition-all","hover:scale-[1.01]","px-[2rem]","sm:px-[5rem]","xl:px-[8rem]","3xl:px-[15rem]","py-5",3,"ngClass"],[1,"w-full","flex","justify-between","items-center","gap-3","sm:gap-5","sm:text-lg","lg:text-xl"],[1,"w-3/5"],[1,"flex","flex-col","md:flex-row","items-center","gap-2","sm:gap-5","w-auto"],[4,"ngIf","ngIfElse"],["href","https://wa.me/971588759719?text=Welcome%20to%20Shakirovna%20Beauty%20Salone",1,"p-1","flex","justify-center","items-center","rounded-full","border-2","border-transparent","hover:border-primary","w-30","sm:w-34","lg:w-38","transition","active:scale-95",3,"ngClass"],[1,"flex","gap-1","lg:gap-3","flex-col","lg:flex-row","text-center"],[1,"font-bold"],[1,"line-through"],[1,"text-primary"]],template:function(e,n){e&1&&(a(0,"section",1),v(1,"img",2)(2,"div",3),a(3,"div",4),x(4,ge,3,5,"span",5)(5,ue,3,3,"span",5),o(),x(6,he,5,2,"div",6),a(7,"div",7),s(8),h(9,"translate"),o()()),e&2&&(r(),c("src",n.image,O),r(3),c("ngIf",n.langCode==="en"&&n.isPododlogy),r(),c("ngIf",n.langCode==="ru"&&n.isPododlogy),r(),c("ngForOf",n.serviceList),r(2),p(" ",y(9,5,"TERM")," "))},dependencies:[N,T,E,B,j,F],encapsulation:2})};var te=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-single-service-page"]],decls:2,vars:0,template:function(e,n){e&1&&v(0,"app-banner")(1,"app-price-list")},dependencies:[R,M],encapsulation:2})};export{te as SingleServicePageComponent};
